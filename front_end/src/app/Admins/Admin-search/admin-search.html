<div class="search-container">
  <input
    type="text"
    placeholder="Search users..."
    [(ngModel)]="searchQuery"
  />
</div>

<!-- Results list -->
<div class="results" (scroll)="handleScroll($event)"
   *ngIf="users().length > 0">
  <div class="user-card" *ngFor="let user of users(); let i = index; trackBy: trackById">
    <img 
      [routerLink]="['/profile', user.username]" 
      [src]="baseApi + user.pic" 
      alt="User profile" 
      class="user-pic" 
    />
    <div [routerLink]="['/profile', user.username]" class="user-info">
      <div class="user-main">
        <h3>{{ user.username }}</h3>
        <span class="role">{{ user.role }}</span>
      </div>
      <p class="email">{{ user.email }}</p>
      <div class="stats">
        <span><strong>Age:</strong> {{ user.age }}</span>
      </div>
    </div>

    <!-- Actions for regular users -->
    <div *ngIf="user.role === 'USER'; else statusBlock" class="actions">
      <select (change)="handleAction($event, user)">
        <option value="">Actions</option>
        <option value="ban">🚫 Ban</option>
        <option value="delete">❌ Delete</option>
      </select>
    </div>

    <!-- Status for non-USER roles -->
    <ng-template #statusBlock>
      <p class="status">Status: {{ user.status }}</p>
    </ng-template>
  </div>
</div>
