<div class="comments">
  <h2>Comments</h2>
  <div class="new-comment">
    <textarea [(ngModel)]="newCommentContent" placeholder="Write your comment..."></textarea>
    <button (click)="submitComment()" [disabled]="!newCommentContent || sending">Post</button>
  </div>

  @for (c of comments; track c.id) {
  <div class="comment">
    <img [src]="BaseUrl + c.user.pic"
      [alt]="c.user.username ? c.user.username + ' profile picture' : 'User profile picture'" />
    <div class="comment-details">
      <strong>{{ c.user.username }}</strong>
      <p class="comment-content">{{ c.content }}</p>
      <small>{{ c.createdAt | date : 'short' }}</small>
    </div>
    @if(c.user.username == userService.user()?.username){
      <button class="menu" mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
    }
    <mat-menu #menu="matMenu">
      <button (click)="deleteComment(c.id,c.user)"  class="delete-comment" mat-menu-item>
        <mat-icon>delete</mat-icon>
        <span>delete</span>
      </button>
    </mat-menu>
  </div>
  } @empty {
  <p class="no-comments">No comments yet. Be the first to post!</p>
  }
</div>